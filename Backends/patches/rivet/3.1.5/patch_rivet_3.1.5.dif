diff -rupN Rivet-3.1.5/Makefile.in ../installed/rivet/3.1.5/Makefile.in
--- Rivet-3.1.5/Makefile.in	2021-11-05 18:37:59.000000000 +0100
+++ ../installed/rivet/3.1.5/Makefile.in	2023-02-22 16:18:38.813232777 +0100
@@ -455,6 +455,20 @@ pkgconfigdir = $(libdir)/pkgconfig
 dist_pkgconfig_DATA = rivet.pc
 DEST = login.hepforge.org:rivet/downloads/
 all: all-recursive
+# Added by GAMBIT
+libRivet.so:
+	cd ${top_builddir}/src/Core/yamlcpp && ${MAKE} $(AM_MAKEFLAGS) librivet-yaml-cpp.la
+	cd ${top_builddir}/src/Core && ${MAKE} $(AM_MAKEFLAGS) libRivetCore.la
+	cd ${top_builddir}/src/Projections && ${MAKE} $(AM_MAKEFLAGS) libRivetProjections.la
+	cd ${top_builddir}/src/Tools && ${MAKE} $(AM_MAKEFLAGS) libRivetTools.la
+	cd ${top_builddir}/src/AnalysisTools && ${MAKE} $(AM_MAKEFLAGS) libRivetAnalysisTools.la
+	cd ${top_builddir}/src && ${MAKE} $(AM_MAKEFLAGS) libRivet.la
+	cd ${top_builddir}/analyses && ${MAKE} $(AM_MAKEFLAGS) install
+	cd ${top_builddir}/pyext && ${MAKE} $(AM_MAKEFLAGS) install
+	mkdir -p ${libdir}
+	if test -e ${top_builddir}/src/.libs/libRivet.so ; then cp ${top_builddir}/src/.libs/libRivet.so ${libdir}/libRivet.so ; fi
+	if test -e ${top_builddir}/src/.libs/libRivet.dylib ; then cp ${top_builddir}/src/.libs/libRivet.dylib ${libdir}/libRivet.so ; fi
+

 .SUFFIXES:
 am--refresh: Makefile
@@ -527,6 +541,7 @@ mostlyclean-libtool:

 clean-libtool:
 	-rm -rf .libs _libs
+	-rm -rf ${libdir}

 distclean-libtool:
 	-rm -f libtool config.lt
diff -rupN Rivet-3.1.5/include/Rivet/Makefile.in ../installed/rivet/3.1.5/include/Rivet/Makefile.in
--- Rivet-3.1.5/include/Rivet/Makefile.in	2021-11-05 18:38:00.000000000 +0100
+++ ../installed/rivet/3.1.5/include/Rivet/Makefile.in	2023-02-22 16:05:03.433033018 +0100
@@ -377,10 +377,10 @@
 top_build_prefix = @top_build_prefix@
 top_builddir = @top_builddir@
 top_srcdir = @top_srcdir@
-nobase_dist_noinst_HEADERS = Tools/osdir.hh Math/eigen3/COPYING.GPL \
-	Math/eigen3/README.md
+nobase_dist_noinst_HEADERS = Tools/osdir.hh
 
 # TODO: Move to Rivet/AnalysisTools header dir?
+# Modified by GAMBIT
 nobase_pkginclude_HEADERS = Rivet.hh Run.hh Event.hh ParticleBase.hh \
 	Particle.fhh Particle.hh Jet.fhh Jet.hh Projection.fhh \
 	Projection.hh ProjectionApplier.hh ProjectionHandler.hh \
@@ -456,174 +456,23 @@
 	Math/Vector3.hh Math/VectorN.hh Math/MatrixN.hh \
 	Math/MathConstants.hh Math/Vectors.hh Math/LorentzTrans.hh \
 	Math/Matrix3.hh Math/MathUtils.hh Math/Vector4.hh Math/Math.hh \
-	Math/Units.hh Math/Constants.hh Math/eigen3/Cholesky \
-	Math/eigen3/Core Math/eigen3/Dense Math/eigen3/Eigenvalues \
-	Math/eigen3/Geometry Math/eigen3/Householder \
-	Math/eigen3/Jacobi Math/eigen3/LU Math/eigen3/QR \
-	Math/eigen3/src/Cholesky/LDLT.h Math/eigen3/src/Cholesky/LLT.h \
-	Math/eigen3/src/Core/arch/AltiVec/Complex.h \
-	Math/eigen3/src/Core/arch/AltiVec/MathFunctions.h \
-	Math/eigen3/src/Core/arch/AltiVec/PacketMath.h \
-	Math/eigen3/src/Core/arch/AVX/Complex.h \
-	Math/eigen3/src/Core/arch/AVX/MathFunctions.h \
-	Math/eigen3/src/Core/arch/AVX/PacketMath.h \
-	Math/eigen3/src/Core/arch/AVX/TypeCasting.h \
-	Math/eigen3/src/Core/arch/AVX512/MathFunctions.h \
-	Math/eigen3/src/Core/arch/AVX512/PacketMath.h \
-	Math/eigen3/src/Core/arch/CUDA/Complex.h \
-	Math/eigen3/src/Core/arch/CUDA/Half.h \
-	Math/eigen3/src/Core/arch/CUDA/MathFunctions.h \
-	Math/eigen3/src/Core/arch/CUDA/PacketMath.h \
-	Math/eigen3/src/Core/arch/CUDA/PacketMathHalf.h \
-	Math/eigen3/src/Core/arch/CUDA/TypeCasting.h \
-	Math/eigen3/src/Core/arch/Default/Settings.h \
-	Math/eigen3/src/Core/arch/NEON/Complex.h \
-	Math/eigen3/src/Core/arch/NEON/MathFunctions.h \
-	Math/eigen3/src/Core/arch/NEON/PacketMath.h \
-	Math/eigen3/src/Core/arch/SSE/Complex.h \
-	Math/eigen3/src/Core/arch/SSE/MathFunctions.h \
-	Math/eigen3/src/Core/arch/SSE/PacketMath.h \
-	Math/eigen3/src/Core/arch/SSE/TypeCasting.h \
-	Math/eigen3/src/Core/arch/ZVector/Complex.h \
-	Math/eigen3/src/Core/arch/ZVector/MathFunctions.h \
-	Math/eigen3/src/Core/arch/ZVector/PacketMath.h \
-	Math/eigen3/src/Core/Array.h Math/eigen3/src/Core/ArrayBase.h \
-	Math/eigen3/src/Core/ArrayWrapper.h \
-	Math/eigen3/src/Core/Assign.h \
-	Math/eigen3/src/Core/AssignEvaluator.h \
-	Math/eigen3/src/Core/BandMatrix.h Math/eigen3/src/Core/Block.h \
-	Math/eigen3/src/Core/BooleanRedux.h \
-	Math/eigen3/src/Core/CommaInitializer.h \
-	Math/eigen3/src/Core/ConditionEstimator.h \
-	Math/eigen3/src/Core/CoreEvaluators.h \
-	Math/eigen3/src/Core/CoreIterators.h \
-	Math/eigen3/src/Core/CwiseBinaryOp.h \
-	Math/eigen3/src/Core/CwiseNullaryOp.h \
-	Math/eigen3/src/Core/CwiseTernaryOp.h \
-	Math/eigen3/src/Core/CwiseUnaryOp.h \
-	Math/eigen3/src/Core/CwiseUnaryView.h \
-	Math/eigen3/src/Core/DenseBase.h \
-	Math/eigen3/src/Core/DenseCoeffsBase.h \
-	Math/eigen3/src/Core/DenseStorage.h \
-	Math/eigen3/src/Core/Diagonal.h \
-	Math/eigen3/src/Core/DiagonalMatrix.h \
-	Math/eigen3/src/Core/DiagonalProduct.h \
-	Math/eigen3/src/Core/Dot.h Math/eigen3/src/Core/EigenBase.h \
-	Math/eigen3/src/Core/functors/AssignmentFunctors.h \
-	Math/eigen3/src/Core/functors/BinaryFunctors.h \
-	Math/eigen3/src/Core/functors/NullaryFunctors.h \
-	Math/eigen3/src/Core/functors/StlFunctors.h \
-	Math/eigen3/src/Core/functors/TernaryFunctors.h \
-	Math/eigen3/src/Core/functors/UnaryFunctors.h \
-	Math/eigen3/src/Core/Fuzzy.h \
-	Math/eigen3/src/Core/GeneralProduct.h \
-	Math/eigen3/src/Core/GenericPacketMath.h \
-	Math/eigen3/src/Core/GlobalFunctions.h \
-	Math/eigen3/src/Core/Inverse.h Math/eigen3/src/Core/IO.h \
-	Math/eigen3/src/Core/Map.h Math/eigen3/src/Core/MapBase.h \
-	Math/eigen3/src/Core/MathFunctions.h \
-	Math/eigen3/src/Core/MathFunctionsImpl.h \
-	Math/eigen3/src/Core/Matrix.h \
-	Math/eigen3/src/Core/MatrixBase.h \
-	Math/eigen3/src/Core/NestByValue.h \
-	Math/eigen3/src/Core/NoAlias.h \
-	Math/eigen3/src/Core/NumTraits.h \
-	Math/eigen3/src/Core/PermutationMatrix.h \
-	Math/eigen3/src/Core/PlainObjectBase.h \
-	Math/eigen3/src/Core/Product.h \
-	Math/eigen3/src/Core/ProductEvaluators.h \
-	Math/eigen3/src/Core/products/GeneralBlockPanelKernel.h \
-	Math/eigen3/src/Core/products/GeneralMatrixMatrix.h \
-	Math/eigen3/src/Core/products/GeneralMatrixMatrixTriangular.h \
-	Math/eigen3/src/Core/products/GeneralMatrixVector.h \
-	Math/eigen3/src/Core/products/Parallelizer.h \
-	Math/eigen3/src/Core/products/SelfadjointMatrixMatrix.h \
-	Math/eigen3/src/Core/products/SelfadjointMatrixVector.h \
-	Math/eigen3/src/Core/products/SelfadjointProduct.h \
-	Math/eigen3/src/Core/products/SelfadjointRank2Update.h \
-	Math/eigen3/src/Core/products/TriangularMatrixMatrix.h \
-	Math/eigen3/src/Core/products/TriangularMatrixVector.h \
-	Math/eigen3/src/Core/products/TriangularSolverMatrix.h \
-	Math/eigen3/src/Core/products/TriangularSolverVector.h \
-	Math/eigen3/src/Core/Random.h Math/eigen3/src/Core/Redux.h \
-	Math/eigen3/src/Core/Ref.h Math/eigen3/src/Core/Replicate.h \
-	Math/eigen3/src/Core/ReturnByValue.h \
-	Math/eigen3/src/Core/Reverse.h Math/eigen3/src/Core/Select.h \
-	Math/eigen3/src/Core/SelfAdjointView.h \
-	Math/eigen3/src/Core/SelfCwiseBinaryOp.h \
-	Math/eigen3/src/Core/Solve.h Math/eigen3/src/Core/SolverBase.h \
-	Math/eigen3/src/Core/SolveTriangular.h \
-	Math/eigen3/src/Core/StableNorm.h \
-	Math/eigen3/src/Core/Stride.h Math/eigen3/src/Core/Swap.h \
-	Math/eigen3/src/Core/Transpose.h \
-	Math/eigen3/src/Core/Transpositions.h \
-	Math/eigen3/src/Core/TriangularMatrix.h \
-	Math/eigen3/src/Core/util/BlasUtil.h \
-	Math/eigen3/src/Core/util/Constants.h \
-	Math/eigen3/src/Core/util/DisableStupidWarnings.h \
-	Math/eigen3/src/Core/util/ForwardDeclarations.h \
-	Math/eigen3/src/Core/util/Macros.h \
-	Math/eigen3/src/Core/util/Memory.h \
-	Math/eigen3/src/Core/util/Meta.h \
-	Math/eigen3/src/Core/util/MKL_support.h \
-	Math/eigen3/src/Core/util/NonMPL2.h \
-	Math/eigen3/src/Core/util/ReenableStupidWarnings.h \
-	Math/eigen3/src/Core/util/StaticAssert.h \
-	Math/eigen3/src/Core/util/XprHelper.h \
-	Math/eigen3/src/Core/VectorBlock.h \
-	Math/eigen3/src/Core/VectorwiseOp.h \
-	Math/eigen3/src/Core/Visitor.h \
-	Math/eigen3/src/Eigenvalues/ComplexEigenSolver.h \
-	Math/eigen3/src/Eigenvalues/ComplexSchur.h \
-	Math/eigen3/src/Eigenvalues/EigenSolver.h \
-	Math/eigen3/src/Eigenvalues/GeneralizedEigenSolver.h \
-	Math/eigen3/src/Eigenvalues/GeneralizedSelfAdjointEigenSolver.h \
-	Math/eigen3/src/Eigenvalues/HessenbergDecomposition.h \
-	Math/eigen3/src/Eigenvalues/MatrixBaseEigenvalues.h \
-	Math/eigen3/src/Eigenvalues/RealQZ.h \
-	Math/eigen3/src/Eigenvalues/RealSchur.h \
-	Math/eigen3/src/Eigenvalues/SelfAdjointEigenSolver.h \
-	Math/eigen3/src/Eigenvalues/Tridiagonalization.h \
-	Math/eigen3/src/Geometry/AlignedBox.h \
-	Math/eigen3/src/Geometry/AngleAxis.h \
-	Math/eigen3/src/Geometry/arch/Geometry_SSE.h \
-	Math/eigen3/src/Geometry/EulerAngles.h \
-	Math/eigen3/src/Geometry/Homogeneous.h \
-	Math/eigen3/src/Geometry/Hyperplane.h \
-	Math/eigen3/src/Geometry/OrthoMethods.h \
-	Math/eigen3/src/Geometry/ParametrizedLine.h \
-	Math/eigen3/src/Geometry/Quaternion.h \
-	Math/eigen3/src/Geometry/Rotation2D.h \
-	Math/eigen3/src/Geometry/RotationBase.h \
-	Math/eigen3/src/Geometry/Scaling.h \
-	Math/eigen3/src/Geometry/Transform.h \
-	Math/eigen3/src/Geometry/Translation.h \
-	Math/eigen3/src/Geometry/Umeyama.h \
-	Math/eigen3/src/Householder/BlockHouseholder.h \
-	Math/eigen3/src/Householder/Householder.h \
-	Math/eigen3/src/Householder/HouseholderSequence.h \
-	Math/eigen3/src/Jacobi/Jacobi.h \
-	Math/eigen3/src/LU/arch/Inverse_SSE.h \
-	Math/eigen3/src/LU/Determinant.h \
-	Math/eigen3/src/LU/FullPivLU.h \
-	Math/eigen3/src/LU/InverseImpl.h \
-	Math/eigen3/src/LU/PartialPivLU.h Math/eigen3/src/misc/Image.h \
-	Math/eigen3/src/misc/Kernel.h \
-	Math/eigen3/src/misc/RealSvd2x2.h \
-	Math/eigen3/src/plugins/ArrayCwiseBinaryOps.h \
-	Math/eigen3/src/plugins/ArrayCwiseUnaryOps.h \
-	Math/eigen3/src/plugins/BlockMethods.h \
-	Math/eigen3/src/plugins/CommonCwiseBinaryOps.h \
-	Math/eigen3/src/plugins/CommonCwiseUnaryOps.h \
-	Math/eigen3/src/plugins/MatrixCwiseBinaryOps.h \
-	Math/eigen3/src/plugins/MatrixCwiseUnaryOps.h \
-	Math/eigen3/src/QR/ColPivHouseholderQR.h \
-	Math/eigen3/src/QR/CompleteOrthogonalDecomposition.h \
-	Math/eigen3/src/QR/FullPivHouseholderQR.h \
-	Math/eigen3/src/QR/HouseholderQR.h \
-	Math/eigen3/src/SVD/BDCSVD.h Math/eigen3/src/SVD/JacobiSVD.h \
-	Math/eigen3/src/SVD/SVDBase.h \
-	Math/eigen3/src/SVD/UpperBidiagonalization.h Math/eigen3/SVD
+	Math/Units.hh Math/Constants.hh \
+        ../gambit/Backends/abstractbase.hpp \
+        ../gambit/Backends/backend_undefs.hpp \
+        ../gambit/Backends/wrapperbase.hpp \
+        ../gambit/Backends/abstracttypedefs.hh \
+        ../gambit/Backends/BOSS_wrapperutils.hh \
+        ../gambit/Backends/wrappertypedefs.hh \
+        ../gambit/Backends/function_return_utils.hpp \
+        ../gambit/Utils/cats.hpp \
+        ../backend_types/Rivet_3_1_5/identification.hpp \
+        ../backend_types/Rivet_3_1_5/forward_decls_abstract_classes.hh \
+        ../backend_types/Rivet_3_1_5/forward_decls_wrapper_classes.hh \
+        ../backend_types/Rivet_3_1_5/abstract_AnalysisHandler.hh \
+        ../backend_types/Rivet_3_1_5/wrapper_AnalysisHandler.hh \
+        ../backend_types/Rivet_3_1_5/wrapper_AnalysisHandler_decl.hh \
+        ../backend_types/Rivet_3_1_5/wrapper_AnalysisHandler_def.hh
+
 all: all-am
 
 .SUFFIXES:
diff -rupN Rivet-3.1.5/src/Core/Makefile.in ../installed/rivet/3.1.5/src/Core/Makefile.in
--- Rivet-3.1.5/src/Core/Makefile.in	2021-11-05 18:38:00.000000000 +0100
+++ ../installed/rivet/3.1.5/src/Core/Makefile.in	2023-02-22 16:05:03.433033018 +0100
@@ -110,6 +110,7 @@ CONFIG_CLEAN_VPATH_FILES =
 LTLIBRARIES = $(noinst_LTLIBRARIES)
 libRivetCore_la_DEPENDENCIES =  \
 	$(builddir)/yamlcpp/librivet-yaml-cpp.la
+# Modified by GAMBIT
 am_libRivetCore_la_OBJECTS = libRivetCore_la-Run.lo \
 	libRivetCore_la-Event.lo libRivetCore_la-Jet.lo \
 	libRivetCore_la-Particle.lo \
@@ -118,7 +119,12 @@ am_libRivetCore_la_OBJECTS = libRivetCor
 	libRivetCore_la-AnalysisLoader.lo \
 	libRivetCore_la-AnalysisInfo.lo \
 	libRivetCore_la-AnalysisHandler.lo \
-	libRivetCore_la-ProjectionHandler.lo
+	libRivetCore_la-ProjectionHandler.lo \
+	libRivetCore_la-BOSS_wrapperutils.lo \
+	libRivetCore_la-BOSS_AnalysisHandler.lo \
+	libRivetCore_la-BOSS_factory_AnalysisHandler.lo \
+	libRivetCore_la-BOSS_func_addAnalysisLibPath.lo \
+	libRivetCore_la-BOSS_function_return_utils.lo
 libRivetCore_la_OBJECTS = $(am_libRivetCore_la_OBJECTS)
 AM_V_lt = $(am__v_lt_@AM_V@)
 am__v_lt_ = $(am__v_lt_@AM_DEFAULT_V@)
@@ -431,11 +437,17 @@ top_srcdir = @top_srcdir@
 SUBDIRS = yamlcpp
 EXTRA_DIST = zstr
 noinst_LTLIBRARIES = libRivetCore.la
+# Modified by GAMBIT
 libRivetCore_la_SOURCES = \
   Run.cc Event.cc Jet.cc Particle.cc \
   ProjectionApplier.cc Projection.cc \
   Analysis.cc AnalysisLoader.cc AnalysisInfo.cc \
-  AnalysisHandler.cc ProjectionHandler.cc
+  AnalysisHandler.cc ProjectionHandler.cc \
+  BOSS_wrapperutils.cc \
+  BOSS_AnalysisHandler.cc \
+  BOSS_factory_AnalysisHandler.cc \
+  BOSS_func_addAnalysisLibPath.cc \
+  BOSS_function_return_utils.cc

 libRivetCore_la_CPPFLAGS = -I$(srcdir)/yamlcpp -DYAML_NAMESPACE=RIVET_YAML $(AM_CPPFLAGS)
 libRivetCore_la_LIBADD = $(builddir)/yamlcpp/librivet-yaml-cpp.la
@@ -504,6 +516,12 @@ distclean-compile:
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libRivetCore_la-ProjectionApplier.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libRivetCore_la-ProjectionHandler.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libRivetCore_la-Run.Plo@am__quote@
+# Added by GAMBIT
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libRivetCore_la-BOSS_wrapperutils.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libRivetCore_la-BOSS_AnalysisHandler.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libRivetCore_la-BOSS_factory_AnalysisHandler.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libRivetCore_la-BOSS_func_addAnalysisLibPath.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libRivetCore_la-BOSS_function_return_utils.Plo@am__quote@

 .cc.o:
 @am__fastdepCXX_TRUE@	$(AM_V_CXX)$(CXXCOMPILE) -MT $@ -MD -MP -MF $(DEPDIR)/$*.Tpo -c -o $@ $<
@@ -603,6 +621,42 @@ libRivetCore_la-ProjectionHandler.lo: Pr
 @AMDEP_TRUE@@am__fastdepCXX_FALSE@	DEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
 @am__fastdepCXX_FALSE@	$(AM_V_CXX@am__nodep@)$(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libRivetCore_la_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -c -o libRivetCore_la-ProjectionHandler.lo `test -f 'ProjectionHandler.cc' || echo '$(srcdir)/'`ProjectionHandler.cc

+# Added by GAMBIT
+libRivetCore_la-BOSS_wrapperutils.lo: BOSS_wrapperutils.cc
+@am__fastdepCXX_TRUE@	$(AM_V_CXX)$(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libRivetCore_la_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -MT libRivetCore_la-BOSS_wrapperutils.lo -MD -MP -MF $(DEPDIR)/libRivetCore_la-BOSS_wrapperutils.Tpo -c -o libRivetCore_la-BOSS_wrapperutils.lo `test -f 'BOSS_wrapperutils.cc' || echo '$(srcdir)/'`BOSS_wrapperutils.cc
+@am__fastdepCXX_TRUE@	$(AM_V_at)$(am__mv) $(DEPDIR)/libRivetCore_la-BOSS_wrapperutils.Tpo $(DEPDIR)/libRivetCore_la-BOSS_wrapperutils.Plo
+@AMDEP_TRUE@@am__fastdepCXX_FALSE@	$(AM_V_CXX)source='BOSS_wrapperutils.cc' object='libRivetCore_la-BOSS_wrapperutils.lo' libtool=yes @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCXX_FALSE@	DEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCXX_FALSE@	$(AM_V_CXX@am__nodep@)$(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libRivetCore_la_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -c -o libRivetCore_la-BOSS_wrapperutils.lo `test -f 'BOSS_wrapperutils.cc' || echo '$(srcdir)/'`BOSS_wrapperutils.cc
+
+libRivetCore_la-BOSS_AnalysisHandler.lo: BOSS_AnalysisHandler.cc
+@am__fastdepCXX_TRUE@	$(AM_V_CXX)$(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libRivetCore_la_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -MT libRivetCore_la-BOSS_AnalysisHandler.lo -MD -MP -MF $(DEPDIR)/libRivetCore_la-BOSS_AnalysisHandler.Tpo -c -o libRivetCore_la-BOSS_AnalysisHandler.lo `test -f 'BOSS_AnalysisHandler.cc' || echo '$(srcdir)/'`BOSS_AnalysisHandler.cc
+@am__fastdepCXX_TRUE@	$(AM_V_at)$(am__mv) $(DEPDIR)/libRivetCore_la-BOSS_AnalysisHandler.Tpo $(DEPDIR)/libRivetCore_la-BOSS_AnalysisHandler.Plo
+@AMDEP_TRUE@@am__fastdepCXX_FALSE@	$(AM_V_CXX)source='BOSS_AnalysisHandler.cc' object='libRivetCore_la-BOSS_AnalysisHandler.lo' libtool=yes @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCXX_FALSE@	DEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCXX_FALSE@	$(AM_V_CXX@am__nodep@)$(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libRivetCore_la_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -c -o libRivetCore_la-BOSS_AnalysisHandler.lo `test -f 'BOSS_AnalysisHandler.cc' || echo '$(srcdir)/'`BOSS_AnalysisHandler.cc
+
+libRivetCore_la-BOSS_factory_AnalysisHandler.lo: BOSS_factory_AnalysisHandler.cc
+@am__fastdepCXX_TRUE@	$(AM_V_CXX)$(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libRivetCore_la_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -MT libRivetCore_la-BOSS_factory_AnalysisHandler.lo -MD -MP -MF $(DEPDIR)/libRivetCore_la-BOSS_factory_AnalysisHandler.Tpo -c -o libRivetCore_la-BOSS_factory_AnalysisHandler.lo `test -f 'BOSS_factory_AnalysisHandler.cc' || echo '$(srcdir)/'`BOSS_factory_AnalysisHandler.cc
+@am__fastdepCXX_TRUE@	$(AM_V_at)$(am__mv) $(DEPDIR)/libRivetCore_la-BOSS_factory_AnalysisHandler.Tpo $(DEPDIR)/libRivetCore_la-BOSS_factory_AnalysisHandler.Plo
+@AMDEP_TRUE@@am__fastdepCXX_FALSE@	$(AM_V_CXX)source='BOSS_factory_AnalysisHandler.cc' object='libRivetCore_la-BOSS_factory_AnalysisHandler.lo' libtool=yes @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCXX_FALSE@	DEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCXX_FALSE@	$(AM_V_CXX@am__nodep@)$(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libRivetCore_la_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -c -o libRivetCore_la-BOSS_factory_AnalysisHandler.lo `test -f 'BOSS_factory_AnalysisHandler.cc' || echo '$(srcdir)/'`BOSS_factory_AnalysisHandler.cc
+
+libRivetCore_la-BOSS_func_addAnalysisLibPath.lo: BOSS_func_addAnalysisLibPath.cc
+@am__fastdepCXX_TRUE@	$(AM_V_CXX)$(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libRivetCore_la_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -MT libRivetCore_la-BOSS_func_addAnalysisLibPath.lo -MD -MP -MF $(DEPDIR)/libRivetCore_la-BOSS_func_addAnalysisLibPath.Tpo -c -o libRivetCore_la-BOSS_func_addAnalysisLibPath.lo `test -f 'BOSS_func_addAnalysisLibPath.cc' || echo '$(srcdir)/'`BOSS_func_addAnalysisLibPath.cc
+@am__fastdepCXX_TRUE@	$(AM_V_at)$(am__mv) $(DEPDIR)/libRivetCore_la-BOSS_func_addAnalysisLibPath.Tpo $(DEPDIR)/libRivetCore_la-BOSS_func_addAnalysisLibPath.Plo
+@AMDEP_TRUE@@am__fastdepCXX_FALSE@	$(AM_V_CXX)source='BOSS_func_addAnalysisLibPath.cc' object='libRivetCore_la-BOSS_func_addAnalysisLibPath.lo' libtool=yes @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCXX_FALSE@	DEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCXX_FALSE@	$(AM_V_CXX@am__nodep@)$(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libRivetCore_la_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -c -o libRivetCore_la-BOSS_func_addAnalysisLibPath.lo `test -f 'BOSS_func_addAnalysisLibPath.cc' || echo '$(srcdir)/'`BOSS_func_addAnalysisLibPath.cc
+
+libRivetCore_la-BOSS_function_return_utils.lo: BOSS_function_return_utils.cc
+@am__fastdepCXX_TRUE@	$(AM_V_CXX)$(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libRivetCore_la_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -MT libRivetCore_la-BOSS_function_return_utils.lo -MD -MP -MF $(DEPDIR)/libRivetCore_la-BOSS_function_return_utils.Tpo -c -o libRivetCore_la-BOSS_function_return_utils.lo `test -f 'BOSS_function_return_utils.cc' || echo '$(srcdir)/'`BOSS_function_return_utils.cc
+@am__fastdepCXX_TRUE@	$(AM_V_at)$(am__mv) $(DEPDIR)/libRivetCore_la-BOSS_function_return_utils.Tpo $(DEPDIR)/libRivetCore_la-BOSS_function_return_utils.Plo
+@AMDEP_TRUE@@am__fastdepCXX_FALSE@	$(AM_V_CXX)source='BOSS_function_return_utils.cc' object='libRivetCore_la-BOSS_function_return_utils.lo' libtool=yes @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCXX_FALSE@	DEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCXX_FALSE@	$(AM_V_CXX@am__nodep@)$(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libRivetCore_la_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -c -o libRivetCore_la-BOSS_function_return_utils.lo `test -f 'BOSS_function_return_utils.cc' || echo '$(srcdir)/'`BOSS_function_return_utils.cc
+
 mostlyclean-libtool:
 	-rm -f *.lo

diff -rupN Rivet-3.1.5/include/Rivet/AnalysisHandler.hh ../installed/rivet/3.1.5/include/Rivet/AnalysisHandler.hh
--- Rivet-3.1.5/include/Rivet/AnalysisHandler.hh	2021-04-27 21:21:47.000000000 +0200
+++ ../installed/rivet/3.1.5/include/Rivet/AnalysisHandler.hh	2023-02-22 16:05:03.433033018 +0100
@@ -27,10 +27,10 @@ namespace Rivet {
     AnalysisHandler(const string& runname="");

     /// The copy constructor is deleted, so it can never be called.
-    AnalysisHandler(const AnalysisHandler&) = delete;
+    //AnalysisHandler(const AnalysisHandler&) = delete; // Commented by GAMBIT

     /// The assignment operator is deleted, so it can never be called.
-    AnalysisHandler& operator=(const AnalysisHandler&) = delete;
+    //AnalysisHandler& operator=(const AnalysisHandler&) = delete; // Commented by GAMBIT

     /// The destructor is not virtual, as this class should not be inherited from.
     ~AnalysisHandler();
@@ -267,6 +267,9 @@ namespace Rivet {
     /// Write all analyses' plots (via getData) to the named file.
     void writeData(const string& filename) const;

+    // Added by GAMBIT, Dummy function to force BOSS to add the headers for the YODA::AnalysisObject type
+    void dummy(YODA::AnalysisObject*) const;
+
     /// @brief Configure the AnalysisObject dump rate and destination.
     ///
     /// Tell Rivet to dump intermediate result to a file named @a
diff -rupN Rivet-3.1.5/include/Rivet/Tools/RivetHepMC.hh ../installed/rivet/3.1.5/include/Rivet/Tools/RivetHepMC.hh
--- Rivet-3.1.5/include/Rivet/Tools/RivetHepMC.hh	2020-04-07 16:43:14.000000000 +0200
+++ ../installed/rivet/3.1.5/include/Rivet/Tools/RivetHepMC.hh	2023-02-22 16:05:03.433033018 +0100
@@ -8,7 +8,7 @@
 #include <valarray>


-#ifdef RIVET_ENABLE_HEPMC_3
+//#ifdef RIVET_ENABLE_HEPMC_3 // Commented by GAMBIT

 #include "HepMC3/HepMC3.h"
 #include "HepMC3/Relatives.h"
@@ -34,7 +34,8 @@ namespace Rivet {
   using PdfInfo = RivetHepMC::GenPdfInfo;
 }

-#else // HEPMC_2
+// Commented by GAMBIT
+/*#else // HEPMC_2

 #include "HepMC/GenEvent.h"
 #include "HepMC/GenParticle.h"
@@ -75,7 +76,7 @@ namespace Rivet {
   using PdfInfo = RivetHepMC::PdfInfo;
 }

-#endif
+#endif*/


 namespace Rivet {
diff -rupN Rivet-3.1.5/src/Core/AnalysisHandler.cc ../installed/rivet/3.1.5/src/Core/AnalysisHandler.c
--- Rivet-3.1.5/src/Core/AnalysisHandler.cc	2021-07-11 23:34:05.000000000 +0200
+++ ../installed/rivet/3.1.5/src/Core/AnalysisHandler.cc	2023-02-22 16:05:03.433033018 +0100
@@ -121,7 +121,8 @@ namespace Rivet {
     if (num_anas_requested > 0 && analysisNames().empty()) {
       MSG_ERROR("All analyses were incompatible with the first event's beams\n"
                 << "Exiting, since this probably wasn't intentional!");
-      exit(1);
+      //exit(1); // Commented by GAMBIT
+      throw std::runtime_error("All analyses were incompatible with the first event's beams\n"); // Added by GAMBIT
     }

     // Warn if any analysis' status is not unblemished
@@ -916,6 +917,12 @@ namespace Rivet {

   }

+  // Added by GAMBIT, dummy function to force BOSS to add the headers for the YODA::AnalysisObject type
+  void AnalysisHandler::dummy(YODA::AnalysisObject* object) const {
+
+    // Nothing to do here
+
+  }

   string AnalysisHandler::runName() const {
     return _runname;
diff -rupN Rivet-3.1.5/analyses/Makefile.in ../installed/rivet/3.1.5/analyses/Makefile.in
--- Rivet-3.1.5/analyses/Makefile.in	2021-11-05 18:37:59.000000000 +0100
+++ ../installed/rivet/3.1.5/analyses/Makefile.in	2023-02-22 16:05:03.437033017 +0100
@@ -329,12 +329,16 @@ top_build_prefix = @top_build_prefix@
 top_builddir = @top_builddir@
 top_srcdir = @top_srcdir@
 AUTOMAKE_OPTIONS = -Wno-portability
-@ENABLE_ANALYSES_TRUE@PLUGIN_DIRS = $(shell ls -d $(srcdir)/plugin*)
+#@ENABLE_ANALYSES_TRUE@PLUGIN_DIRS = $(shell ls -d $(srcdir)/plugin*) # Commented by GAMBIT
+@ENABLE_ANALYSES_TRUE@PLUGIN_DIRS = $(shell ls -d $(srcdir)/pluginATLAS $(srcdir)/pluginCMS) # Added by GAMBIT
 @ENABLE_ANALYSES_TRUE@PLUGIN_NAMES = $(notdir $(subst plugin,,$(PLUGIN_DIRS)))
 @ENABLE_ANALYSES_TRUE@PLUGIN_LIBS = $(patsubst %,Rivet%Analyses.so,$(PLUGIN_NAMES))
-@ENABLE_ANALYSES_TRUE@PLUGIN_INFOFILES = $(shell ls $(abs_srcdir)/plugin*/*.info)
-@ENABLE_ANALYSES_TRUE@PLUGIN_PLOTFILES = $(shell ls $(abs_srcdir)/plugin*/*.plot)
-@ENABLE_ANALYSES_TRUE@PLUGIN_YODAFILES = $(shell ls $(abs_srcdir)/plugin*/*.yoda*)
+#@ENABLE_ANALYSES_TRUE@PLUGIN_INFOFILES = $(shell ls $(abs_srcdir)/plugin*/*.info) # Commented by GAMBIT
+@ENABLE_ANALYSES_TRUE@PLUGIN_INFOFILES = $(shell ls $(abs_srcdir)/pluginATLAS/*.info $(abs_srcdir)/pluginCMS/*.info) # Added by GAMBIT
+#@ENABLE_ANALYSES_TRUE@PLUGIN_PLOTFILES = $(shell ls $(abs_srcdir)/plugin*/*.plot) # Commented by GAMBIT
+@ENABLE_ANALYSES_TRUE@PLUGIN_PLOTFILES = $(shell ls $(abs_srcdir)/pluginATLAS/*.plot $(abs_srcdir)/pluginCMS/*.plot) # Added by GAMBIT
+#@ENABLE_ANALYSES_TRUE@PLUGIN_YODAFILES = $(shell ls $(abs_srcdir)/plugin*/*.yoda*) # Commented by GAMBIT
+@ENABLE_ANALYSES_TRUE@PLUGIN_YODAFILES = $(shell ls $(abs_srcdir)/pluginATLAS/*.yoda* $(abs_srcdir)/pluginCMS/*.yoda*) # Added by GAMBIT
 @ENABLE_ANALYSES_TRUE@PLUGIN_DATAFILES = $(PLUGIN_INFOFILES) $(PLUGIN_PLOTFILES) $(PLUGIN_YODAFILES)
 @ENABLE_ANALYSES_TRUE@CLEANFILES = $(PLUGIN_LIBS)
 @ENABLE_ANALYSES_TRUE@EXTRA_DIST = $(PLUGIN_DIRS)
diff -rupN Rivet-3.1.5/analyses/pluginCMS/CMS_2018_I1663958.cc ../installed/rivet/3.1.5/analyses/pluginCMS/CMS_2018_I1663958.cc
--- Rivet-3.1.5/analyses/pluginCMS/CMS_2018_I1663958.cc	2021-11-08 21:05:48.000000000 +0100
+++ ../installed/rivet/3.1.5/analyses/pluginCMS/CMS_2018_I1663958.cc	2023-02-22 16:05:03.437033017 +0100
@@ -120,7 +120,7 @@ namespace Rivet {

       const Particles& photons = apply<VetoedFinalState>(event, "MyPhotons").particles(Cuts::abseta < 2.4 && Cuts::pT > 15*GeV);
       for (const Particle& ph : photons) {
-        double isolation = sum(filter_select(isopars, deltaRLess(ph, 0.4)), pT, 0.);
+        double isolation = sum(filter_select(isopars, deltaRLess(ph, 0.4)), Kin::pT, 0.);
         isolation = isolation/ph.pt() - 1.;
         if (isolation > 0.25) continue;
         additionalobjects += ph;
diff -rupN Rivet-3.1.5/include/Rivet/Math/MatrixN.hh ../installed/rivet/3.1.5/include/Rivet/Math/MatrixN.hh
--- Rivet-3.1.5/include/Rivet/Math/MatrixN.hh	2020-01-06 11:36:55.000000000 +0100
+++ ../installed/rivet/3.1.5/include/Rivet/Math/MatrixN.hh	2024-01-16 12:03:46.891785360 +0100
@@ -5,7 +5,7 @@
 #include "Rivet/Math/MathUtils.hh"
 #include "Rivet/Math/Vectors.hh"
 
-#include "Rivet/Math/eigen3/Dense"
+#include <Eigen/Dense>
 
 namespace Rivet {

diff -rupN Rivet-3.1.5/include/Rivet/Math/VectorN.hh ../installed/rivet/3.1.5/include/Rivet/Math/VectorN.hh
--- Rivet-3.1.5/include/Rivet/Math/VectorN.hh	2020-01-06 11:36:55.000000000 +0100
+++ ../installed/rivet/3.1.5/include/Rivet/Math/VectorN.hh	2024-01-16 12:03:46.891785360 +0100
@@ -4,7 +4,7 @@
 #include "Rivet/Math/MathConstants.hh"
 #include "Rivet/Math/MathUtils.hh"
 
-#include "Rivet/Math/eigen3/Dense"
+#include <Eigen/Dense>
 
 namespace Rivet {

